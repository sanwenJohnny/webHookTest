/**
 * @providesModule fm-dialog - dialog
 * @author ifootmark@163.com
 * @version v2.0.0
 * @link https://ifootmark.github.io/fm-dialog/
 * @license MIT
 * @time 2018-3-22 14:57:32
 */
"use strict";function hasClass(e,t){var o=new RegExp("(\\s|^)"+t+"(\\s|$)");return e.className.match(o)}function addClass(e,t){hasClass(e,t)||(e.className+=" "+t)}function removeClass(e,t){if(hasClass(e,t)){var o=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(o,"")}}function addEvent(e,t,o){e&&(e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent?(e[t+o]=function(){o.call(e)},e.attachEvent("on"+t,e[t+o])):e["on"+t]=o)}function removeEvent(e,t,o){e&&(e.removeEventListener?e.removeEventListener(t,o,!1):e.attachEvent?e.detachEvent("on"+t,e[t+o]):e["on"+t]=o)}function loadCSS(e,t,o){if(e){o=o||"head",t=t||function(){};var i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.onload=i.onreadystatechange=function(){t()},i.href=e,"head"===o?document.getElementsByTagName("head")[0].appendChild(i):document.body.appendChild(i)}}var fmDialog={_id:null,options:{},"default":{id:"fmdialog",title:"提示",content:"",width:300,showTitle:!0,showClose:!1,template:!0,buttonMaxCount:3,buttonDirection:"horizontal",button:[{name:"取消",css:"",callback:null},{name:"确定",css:"",callback:null}],lock:!0,quickClose:!1,auto:!1,timeOut:2e3,isMsg:!1,msgType:"default",zIndex:9998,boxCss:"",titleCss:"",contentCss:"",footCss:"",callback:null},show:function(e){if(null!=fmDialog["default"]&&"undefined"!=typeof fmDialog["default"]){e=e||{};for(var t in fmDialog["default"])void 0!==e[t]&&null!==e[t]||(e[t]=fmDialog["default"][t]);fmDialog.options[e.id]=e}var o=fmDialog.options[e.id];fmDialog._id=o.id;var i=o.showClose?'<div class="iclose" style="position:absolute;top:4px;right:8px;color:#8C8C8C;font-size:20px;cursor:pointer;">X</div>':"",n=o.content;if(o.template&&!o.isMsg){var l="horizontal"==o.buttonDirection?"":"border-bottom: 1px solid #EFEFEF;padding-bottom: 20px;";n='<div class="ftitle" style="padding: 20px 20px 0;font-size: 18px;color: #1A1A1A; text-align: center;'+l+" "+o.titleCss+'">'+o.title+'</div><div class="fcontent" style="padding: 30px 24px;font-size: 15px; color: #6B6B6B;text-align: center;'+o.contentCss+'">'+o.content+"</div>";var a=o.button.length;if(a>0){var s=parseFloat((100/a).toFixed(2))+"%";n+="horizontal"==o.buttonDirection?'<div class="ffoot" style="display: flex;flex-flow: row nowrap;color: #1A1A1A;font-size: 17px;border-top: 1px solid #EFEFEF;'+o.footCss+'">':'<div class="ffoot" style="display: flex;flex-flow: column nowrap;color: #1A1A1A;font-size: 16px;'+o.footCss+'">';for(var d=0;d<o.button.length&&!(d>o.buttonMaxCount-1);d++){var c=o.button[d],r=c.css||"",f="",u=d>0?"border-left: 1px solid #EFEFEF;":"";"horizontal"==o.buttonDirection?n+='<div class="fbtn" id="btn_'+d+'" style="flex:auto;width:'+s+"; height:46px;line-height:46px; text-align: center;cursor: pointer; "+u+" "+r+'">'+c.name+"</div>":(0==d?(f="background-color:#1A1A1A;color:#FFFFFF;",u="border: 1px solid #1A1A1A;border-radius: 2px;margin:0 20px 20px;"):u="border: 1px solid #8C8C8C;border-radius: 2px;margin:0 20px 20px;",n+='<div class="fbtn" id="btn_'+d+'" style="flex:auto; height:46px;line-height:46px; text-align: center;cursor: pointer; '+f+" "+u+" "+r+'">'+c.name+"</div>")}n+="</div>"}}var m="<div id="+fmDialog._id+'><div class="imask" style="display: none;position: fixed;top: 0;left: 0;width: 100%;height: 100%;background: rgba(0, 0, 0, 0.4);filter: alpha(opacity=40); z-index:'+o.zIndex+';"></div><div class="ipopup" style="display: none;position: fixed;border-radius: 8px;background: #fff; max-width:80%; overflow: hidden; z-index:'+(o.zIndex+1)+';">     <div class="ibox"></div></div></div>';if(!document.getElementById(fmDialog._id)){var p=document.createElement("div");p.innerHTML=m,document.body.appendChild(p)}var g=document.getElementById(fmDialog._id),v=g.getAttribute("id"),x=g.querySelector(".ibox");if(x.innerHTML=i+n,o.button.length>0)for(var d in o.button){if(d>o.buttonMaxCount-1)break;var h=g.querySelector("#btn_"+d);addEvent(h,"click",function(){var e=this.id.replace(/btn_/,""),t=o.button[e];t.callback&&t.callback()})}if(""!=o.boxCss?x.style.cssText=o.boxCss:x.style.cssText="",o.showClose){var y=g.querySelector(".iclose");addEvent(y,"click",function(){g&&fmDialog.close(v)})}o.lock&&fmDialog.showMask(g),o.showTitle||(g.querySelector(".ftitle").style.display="none"),o.auto&&setTimeout(function(){g&&fmDialog.close(v)},o.timeOut),fmDialog.showContent(g);var b=o.callback;null!=b&&"undefined"!=typeof b&&"function"==typeof b&&b()},showMask:function(e){var t=e.querySelector(".imask");t.style.display="block",fmDialog.options[fmDialog._id].quickClose&&addEvent(t,"click",function(){fmDialog.close(fmDialog._id)})},showContent:function(e){var t=e.querySelector(".ipopup");t.style.display="block",fmDialog.resize(e),fmDialog.center(t),removeClass(t,"animateOut"),addClass(t,"animateIn")},resize:function(e){var t=e.querySelector(".ibox"),o=t.parentElement,i=fmDialog.options[fmDialog._id],n=i.width;if(i.isMsg){o.style.width="auto";var l=i.msgType||"default",a=(t.className.match(/\bmsg-\S+/g)||[]).join("");removeClass(t,a),addClass(t,"msgcomm"),addClass(t,"msg-"+l)}else{var s=n.toString().indexOf("%")>-1;o.style.width=parseInt(n)+(s?"%":"px"),t.className="ibox"}},center:function(e){var t=(document.documentElement.clientHeight-e.offsetHeight)/2,o=(document.documentElement.clientWidth-e.offsetWidth)/2;e.style.top=t+"px",e.style.left=o+"px"},close:function(e){var t=document.querySelector("#"+e+" .imask"),o=document.querySelector("#"+e+" .ipopup");"none"==window.getComputedStyle(o,null).getPropertyValue("animation-name")?o.style.display="none":setTimeout(function(){o.style.display="none"},500),removeClass(o,"animateIn"),addClass(o,"animateOut"),t.style.display="none"}},Dlg={show:function(e){fmDialog.show(e)},confirm:function(e){e.id=e.id||"iconfirm",fmDialog.show(e)},msg:function(e){e.id=e.id||"imsg",e.content=e.content||"",e.msgType=e.msgType||"default",e.isMsg=!0,e.lock=void 0!==e.lock&&e.lock,e.auto=void 0===e.auto||e.auto,fmDialog.show(e)},loading:function(e){e.id=e.id||"iloading";var t=e.content||"处理中，请稍候…";e.content='<div class="floading"><span class="loading"></span><span class="tips">'+t+"</span></div>",e.isMsg=!0,e.msgType=e.msgType||"inverse",fmDialog.show(e)},close:function(e){fmDialog.close(e)},config:function(e){var t=e||{},o=t.cssDir||"";o&&loadCSS(o,null,"head")}};!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t:e.Dlg=t}(this,Dlg);